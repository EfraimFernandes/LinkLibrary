<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LL - Login</title>

    <link rel="stylesheet" href="../styles/logAndSign.css">
    <link rel="icon" href="../images/LinkLibrary.png">
</head>
<body>
    <div class="content">
        <img class="img" src="../images/MulherNegraPraiaPorDoSol.jpeg" alt="...">
        <div class="formulario">
            <div class="cabecalho">
                <a href="../index.html"><button class="back"><i class="fa-solid fa-arrow-left"></i> ir à página inicial</button></a>
                <img src="../images/LinkLibrary.png" alt="..." class="logo">
            </div>
            <h2 class="welcome">Bem-vindo de volta!</h2>
            <h1 class="title">Login</h1>
            <div class="label-container">
                <input type="email" id="email" placeholder="">
                <label for="email">Email</label>
            </div>
            <div class="label-container">
                <input type="password" id="password" placeholder="">
                <label for="password">Senha</label>
            </div>
            <!-- <button  class="btn">Entrar</button> -->
            <a id="login" class="entrar">
                <button class="btn">Entrar</button>
            </a>

            <div class="option">
                <h3>Ainda não tem uma conta?</h3>
                <a class="link" href="./cadastro.html">Crie uma!</a>
            </div>
        </div>
    </div>
</body>
<script src="https://kit.fontawesome.com/3d44487db1.js" crossorigin="anonymous"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-auth.js"></script>
<script>

// Seu web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyDY91LEH4kKCkCrGRzAz-gVaI1mRbqUEVY",
  authDomain: "linklibrary-13a78.firebaseapp.com",
  projectId: "linklibrary-13a78",
  storageBucket: "linklibrary-13a78.appspot.com",
  messagingSenderId: "60208529988",
  appId: "1:60208529988:web:7d77720d369ef0a3ebb211"
};

// Inicializar o Firebase
const app = firebase.initializeApp(firebaseConfig);

function Entrar() {
    const email = document.querySelector("#email").value;
    const password = document.querySelector("#password").value;
    // Inicializar a autenticação Firebase
    const auth = firebase.auth();

    // Fazer login do usuário com email e senha
    firebase.auth().signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        // Login do usuário bem-sucedido
        const user = userCredential.user;
        // Você pode redirecionar o usuário para a página de perfil ou outra página após o login
        window.location.href = "./home.html";
      })
    .catch((error) => {
        // Lidar com erros de login
        const errorCode = error.code;
        let errorMessage = error.message;

        if (errorCode === "auth/user-not-found") {
            errorMessage = "Usuário não encontrado. Verifique o email e tente novamente.";
        } else {
            errorMessage = "Erro no login. Verifique o email e/ou a senha e tente novamente.";
        }
        
        alert("Erro no login: " + errorMessage);
        // Você pode exibir uma mensagem de erro ao usuário
    });
};

document.querySelector("#login").addEventListener("click", () => {
    Entrar()
})


document.getElementById("password").addEventListener("keyup", function(event) {
    if (event.keyCode === 13) {
        Entrar();
    }
});
</script>
</html>
